<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ZEUSVPN</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root{
      /* Zeus palette */
      --bg0:#05060a;
      --bg1:#070a14;
      --sky:#0b1030;

      --text:#f3f6ff;
      --muted:#aab3d3;

      --gold:#f6d36b;
      --gold2:#ffbf2f;
      --gold3:#b48722;

      --bolt:#7cd6ff;
      --bolt2:#3f7bff;

      --marbleA: rgba(255,255,255,.10);
      --marbleB: rgba(255,255,255,.06);

      --card: rgba(10,12,20,.66);
      --stroke: rgba(255,255,255,.10);

      --ok:#24d38c;
      --warn:#ffd66a;
      --bad:#ff4d4d;

      --r16:16px;
      --r20:20px;
      --shadow: 0 20px 60px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 520px at 50% -12%, rgba(124,214,255,.16), transparent 60%),
        radial-gradient(720px 420px at 110% 8%, rgba(246,211,107,.12), transparent 60%),
        radial-gradient(980px 640px at 35% 120%, rgba(63,123,255,.14), transparent 60%),
        linear-gradient(180deg, var(--sky), var(--bg0));
      overflow-x:hidden;
    }

    /* film grain */
    body:before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.25;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.10'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
    }

    /* Zeus lightning sweeps */
    .storm{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.9;
      z-index:0;
    }
    .storm:before, .storm:after{
      content:"";
      position:absolute; inset:-20%;
      background:
        linear-gradient(115deg,
          transparent 0 44%,
          rgba(124,214,255,.10) 47%,
          transparent 50%),
        linear-gradient(70deg,
          transparent 0 60%,
          rgba(246,211,107,.08) 63%,
          transparent 66%),
        radial-gradient(240px 120px at 20% 18%, rgba(124,214,255,.10), transparent 70%),
        radial-gradient(260px 140px at 80% 16%, rgba(246,211,107,.08), transparent 70%);
      filter: blur(.2px);
      animation: sweep 7.5s linear infinite;
      opacity:.35;
    }
    .storm:after{
      animation-duration: 10.5s;
      opacity:.22;
      transform: rotate(12deg);
    }
    @keyframes sweep{
      0%{ transform: translateX(-6%) translateY(0) }
      50%{ transform: translateX(6%) translateY(1%) }
      100%{ transform: translateX(-6%) translateY(0) }
    }

    .app{
      max-width:520px;
      margin:0 auto;
      padding: 16px 14px 96px;
      position:relative;
      z-index:1;
    }

    /* Header */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 6px 2px 10px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:0;
    }

    .emblem{
      width:46px; height:46px;
      border-radius:16px;
      position:relative;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
      box-shadow:
        0 18px 40px rgba(0,0,0,.40),
        0 16px 36px rgba(63,123,255,.12);
      background:
        radial-gradient(18px 18px at 32% 28%, rgba(255,255,255,.18), transparent 70%),
        linear-gradient(145deg, rgba(246,211,107,.95), rgba(63,123,255,.92));
    }
    .emblem:before{
      /* tiny lightning mark */
      content:"";
      position:absolute;
      left:50%; top:50%;
      width:16px; height:24px;
      transform: translate(-50%,-50%) skewX(-10deg);
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.18));
      clip-path: polygon(55% 0, 100% 0, 62% 45%, 92% 45%, 35% 100%, 50% 58%, 18% 58%);
      opacity:.85;
      filter: drop-shadow(0 0 10px rgba(124,214,255,.35));
    }
    .emblem:after{
      /* shine */
      content:"";
      position:absolute; inset:-50%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.25), transparent);
      transform: rotate(25deg);
      animation: shine 3.2s linear infinite;
      opacity:.8;
    }
    @keyframes shine{
      0%{transform:translateX(-55%) rotate(25deg)}
      100%{transform:translateX(55%) rotate(25deg)}
    }

    .brand h1{
      margin:0;
      font-size:18px;
      letter-spacing: 1.1px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .brand small{
      display:block;
      margin-top:2px;
      color:var(--muted);
      font-size:12px;
      letter-spacing:.2px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(10,12,20,.45);
      backdrop-filter: blur(8px);
      box-shadow: 0 14px 36px rgba(0,0,0,.28);
      font-size:12px;
      color:var(--muted);
      white-space:nowrap;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background: var(--warn);
      box-shadow: 0 0 14px rgba(255,214,106,.45);
    }

    /* Hero */
    .hero{
      border-radius: var(--r20);
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(600px 240px at 20% 0%, rgba(246,211,107,.10), transparent 60%),
        radial-gradient(600px 240px at 82% 12%, rgba(124,214,255,.10), transparent 60%),
        linear-gradient(180deg, rgba(10,14,30,.68), rgba(6,8,14,.68));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      padding:16px;
      margin-bottom: 12px;
    }
    .hero:before{
      /* Greek key border (meander) */
      content:"";
      position:absolute;
      left:0; right:0; top:0;
      height:34px;
      background:
        linear-gradient(180deg, rgba(0,0,0,.20), transparent),
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='72' height='34' viewBox='0 0 72 34'%3E%3Cg fill='none' stroke='%23f6d36b' stroke-opacity='.45' stroke-width='2'%3E%3Cpath d='M2 30V6h22v10H12v14h24V18h10v12h24V6H48V2h22v28'/%3E%3C/g%3E%3C/svg%3E");
      background-repeat: repeat-x;
      background-position: center;
      opacity:.9;
    }
    .hero:after{
      /* temple columns silhouette */
      content:"";
      position:absolute; inset:0;
      opacity:.10;
      background:
        radial-gradient(520px 260px at 50% 100%, rgba(255,255,255,.18), transparent 70%),
        linear-gradient(180deg, transparent 60%, rgba(0,0,0,.32));
      mask-image:
        radial-gradient(580px 260px at 50% 100%, #000 50%, transparent 75%);
      pointer-events:none;
    }

    .heroTitle{
      margin: 18px 0 6px;
      font-size: 20px;
      letter-spacing: .6px;
      line-height:1.15;
    }
    .heroSub{
      margin:0;
      color: var(--muted);
      font-size: 12.5px;
      line-height:1.45;
      max-width: 36ch;
    }

    .heroRow{
      display:flex;
      gap:10px;
      margin-top: 14px;
      align-items:stretch;
    }

    .miniStat{
      flex:1;
      padding:10px 10px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      position:relative;
      overflow:hidden;
    }
    .miniStat:before{
      content:"";
      position:absolute; inset:-60%;
      background: linear-gradient(90deg, transparent, rgba(124,214,255,.14), transparent);
      transform: rotate(18deg);
      animation: statshine 4.2s linear infinite;
      opacity:.7;
    }
    @keyframes statshine{
      0%{transform:translateX(-55%) rotate(18deg)}
      100%{transform:translateX(55%) rotate(18deg)}
    }
    .miniStat b{
      display:block;
      font-size: 13px;
      letter-spacing:.3px;
      color: var(--text);
      margin-bottom: 4px;
    }
    .miniStat span{
      font-size: 12px;
      color: var(--muted);
    }

    /* Card (marble) */
    .card{
      border-radius: var(--r20);
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(520px 220px at 18% 0%, rgba(124,214,255,.10), transparent 60%),
        radial-gradient(520px 240px at 88% 10%, rgba(246,211,107,.10), transparent 60%),
        linear-gradient(180deg, rgba(10,12,20,.70), rgba(6,8,14,.70));
      box-shadow: var(--shadow);
      padding: 14px;
      margin: 12px 0;
      position:relative;
      overflow:hidden;
    }
    .card .marble{
      position:absolute; inset:0;
      opacity:.42;
      pointer-events:none;
      background:
        radial-gradient(400px 220px at 20% 30%, rgba(255,255,255,.07), transparent 65%),
        radial-gradient(400px 220px at 70% 60%, rgba(255,255,255,.05), transparent 65%),
        linear-gradient(120deg,
          transparent 0%,
          rgba(255,255,255,.05) 8%,
          transparent 16%,
          rgba(255,255,255,.04) 24%,
          transparent 34%,
          rgba(255,255,255,.03) 44%,
          transparent 58%,
          rgba(255,255,255,.03) 66%,
          transparent 80%,
          rgba(255,255,255,.02) 90%,
          transparent 100%);
      mix-blend-mode: overlay;
    }

    .head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
      position:relative;
      z-index:1;
    }
    .head h2{
      margin:0;
      font-size: 14px;
      letter-spacing:.4px;
    }
    .head small{
      color: var(--muted);
      font-size:12px;
    }

    .meanderLine{
      height:2px;
      border-radius:999px;
      margin: 10px 0 12px;
      background: linear-gradient(90deg,
        transparent,
        rgba(246,211,107,.55),
        rgba(124,214,255,.55),
        transparent);
      box-shadow: 0 0 22px rgba(124,214,255,.10);
      position:relative;
      z-index:1;
    }

    /* Inputs */
    .input{
      width:100%;
      padding:12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(5,6,10,.55);
      color: var(--text);
      outline:none;
      font-size:14px;
      position:relative;
      z-index:1;
    }
    .hint{
      color: var(--muted);
      font-size: 12px;
      line-height:1.45;
      position:relative;
      z-index:1;
    }

    /* Buttons */
    .btn{
      width:100%;
      border: none;
      border-radius: 16px;
      padding: 14px 14px;
      cursor:pointer;
      font-weight: 900;
      letter-spacing:.35px;
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
      z-index:1;
    }
    .btn.primary{
      color: #0b0f19;
      background:
        radial-gradient(160px 50px at 30% 0%, rgba(255,255,255,.35), transparent 55%),
        linear-gradient(180deg, var(--gold), var(--gold2));
      box-shadow:
        0 18px 48px rgba(246,211,107,.15),
        0 14px 34px rgba(0,0,0,.32);
    }
    .btn.primary:before{
      content:"";
      position:absolute; inset:-55%;
      background: linear-gradient(90deg, transparent, rgba(124,214,255,.22), transparent);
      transform: rotate(18deg);
      animation: btnshine 2.6s linear infinite;
      opacity:.75;
      pointer-events:none;
    }
    @keyframes btnshine{
      0%{transform:translateX(-55%) rotate(18deg)}
      100%{transform:translateX(55%) rotate(18deg)}
    }
    .btn.secondary{
      color: var(--text);
      border:1px solid rgba(124,214,255,.24);
      background:
        radial-gradient(160px 50px at 30% 0%, rgba(255,255,255,.10), transparent 55%),
        linear-gradient(180deg, rgba(124,214,255,.22), rgba(63,123,255,.18));
      box-shadow: 0 18px 48px rgba(63,123,255,.12);
    }
    .btn.ghost{
      color: var(--muted);
      border:1px dashed rgba(255,255,255,.18);
      background: transparent;
      box-shadow:none;
      font-weight:800;
    }
    .btn:active{ transform: translateY(1px); }
    .btn[disabled]{opacity:.45; cursor:not-allowed; filter:saturate(.7);}

    .row{display:flex; gap:10px; position:relative; z-index:1;}
    .row .btn{flex:1}

    /* Boxes */
    .box{
      margin-top: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(5,6,10,.52);
      padding: 12px;
      position:relative;
      z-index:1;
    }
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      line-height: 1.35;
      word-break: break-all;
      color: #e9eeff;
    }

    .statusRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      font-weight: 850;
      font-size: 12px;
      white-space: nowrap;
    }
    .badge.ok{border-color: rgba(36,211,140,.35); background: rgba(36,211,140,.08); color:#c7ffe7;}
    .badge.warn{border-color: rgba(255,214,106,.35); background: rgba(255,214,106,.08); color:#fff0c2;}
    .badge.bad{border-color: rgba(255,77,77,.35); background: rgba(255,77,77,.08); color:#ffc6c6;}

    .hidden{display:none !important;}

    /* Bottom nav */
    .nav{
      position:fixed;
      left:0; right:0; bottom:0;
      padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
      background: rgba(5,6,10,.72);
      border-top: 1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(12px);
      z-index:5;
    }
    .navInner{
      max-width:520px;
      margin:0 auto;
      display:flex;
      gap:10px;
    }
    .tab{
      flex:1;
      padding: 12px 10px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      color: var(--muted);
      font-weight: 900;
      letter-spacing:.2px;
      cursor:pointer;
    }
    .tab.active{
      color: var(--text);
      border-color: rgba(246,211,107,.26);
      background:
        radial-gradient(220px 60px at 50% 0%, rgba(246,211,107,.14), rgba(255,255,255,.05)),
        linear-gradient(180deg, rgba(124,214,255,.10), rgba(63,123,255,.06));
    }

    /* Swipe cards (instructions) */
    .carousel{
      display:flex;
      gap:12px;
      overflow:auto;
      scroll-snap-type:x mandatory;
      -webkit-overflow-scrolling:touch;
      padding-bottom: 6px;
    }
    .carousel::-webkit-scrollbar{display:none}
    .slide{
      min-width: 86%;
      scroll-snap-align: start;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(340px 180px at 20% 0%, rgba(246,211,107,.10), transparent 60%),
        radial-gradient(340px 180px at 82% 10%, rgba(124,214,255,.10), transparent 60%),
        linear-gradient(180deg, rgba(10,12,20,.68), rgba(6,8,14,.68));
      padding: 14px;
      position:relative;
      overflow:hidden;
    }
    .slide:before{
      content:"";
      position:absolute; inset:0;
      opacity:.35;
      background:
        linear-gradient(120deg,
          transparent 0%,
          rgba(255,255,255,.05) 12%,
          transparent 24%,
          rgba(255,255,255,.035) 36%,
          transparent 52%,
          rgba(255,255,255,.03) 68%,
          transparent 82%,
          rgba(255,255,255,.02) 100%);
      mix-blend-mode: overlay;
      pointer-events:none;
    }
    .slideTitle{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom: 8px;
      position:relative; z-index:1;
    }
    .slideTitle b{ font-size: 14px; letter-spacing:.3px; }
    .slideTitle span{
      font-size: 12px;
      color: var(--muted);
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      padding: 6px 10px;
      border-radius: 999px;
      white-space: nowrap;
    }
    .steps{
      position:relative; z-index:1;
      color: var(--muted);
      font-size: 12.5px;
      line-height: 1.55;
    }

  </style>
</head>

<body>
  <div class="storm"></div>

  <div class="app">
    <div class="topbar">
      <div class="brand">
        <div class="emblem"></div>
        <div style="min-width:0">
          <h1>ZEUSVPN</h1>
          <small>–û–ª–∏–º–ø–∏–π—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å ‚Ä¢ –º–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω—ã–π VLESS</small>
        </div>
      </div>

      <div class="pill" id="apiPill">
        <span class="dot" id="apiDot"></span>
        <span id="apiText">API: –ø—Ä–æ–≤–µ—Ä—è—é‚Ä¶</span>
      </div>
    </div>

    <!-- HERO -->
    <div class="hero">
      <div class="heroTitle">–©–∏—Ç –û–ª–∏–º–ø–∞. –ú–æ–ª–Ω–∏—è –≤ –æ–¥–∏–Ω —Ç–∞–ø.</div>
      <p class="heroSub">
        –ü–æ–ª—É—á–∞–π –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π VLESS-–∫–æ–Ω—Ñ–∏–≥. –û–ø–ª–∞—Ç–∞ Stars/USDT —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–∞ (–ø–æ–∫–∞–∂–µ–º –∫–æ–Ω—Ñ–∏–≥ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è).
      </p>

      <div class="heroRow">
        <div class="miniStat">
          <b>–ü–æ–¥–ø–∏—Å–∫–∞</b>
          <span id="heroSub">–ø–æ–∫–∞ –±–µ–∑ –æ–ø–ª–∞—Ç—ã</span>
        </div>
        <div class="miniStat">
          <b>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</b>
          <span>1/5/10 (UI)</span>
        </div>
        <div class="miniStat">
          <b>–°—Ç–∞—Ç—É—Å</b>
          <span id="heroApi">‚Äî</span>
        </div>
      </div>
    </div>

    <!-- HOME -->
    <div id="screenHome">
      <div class="card">
        <div class="marble"></div>

        <div class="head">
          <h2>–ö–æ–Ω—Ñ–∏–≥ ZEUS</h2>
          <small>—É–Ω–∏–∫–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ</small>
        </div>
        <div class="meanderLine"></div>

        <input class="input" id="userKey" placeholder="ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)" />
        <div style="height:8px"></div>
        <div class="hint">
          –û—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º ‚Äî —Å–¥–µ–ª–∞–µ–º ID –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ü–æ–∑–∂–µ —Ç—É—Ç –±—É–¥–µ—Ç Telegram –ø—Ä–æ—Ñ–∏–ª—å (tg id).
        </div>

        <div style="height:12px"></div>
        <button class="btn primary" id="btnGetConfig">‚ö° –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥</button>

        <div id="configBox" class="box hidden">
          <div class="statusRow">
            <div class="badge ok">VLESS</div>
            <button class="btn secondary" id="btnCopy" style="width:auto; padding:10px 12px;">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
          </div>
          <div class="meanderLine"></div>
          <div class="mono" id="configText"></div>
        </div>

        <div id="errBox" class="box hidden" style="border-color: rgba(255,77,77,.35);">
          <div class="statusRow">
            <div class="badge bad">–û—à–∏–±–∫–∞</div>
            <div class="hint" id="errText" style="text-align:right"></div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="marble"></div>

        <div class="head">
          <h2>–û–ø–ª–∞—Ç–∞</h2>
          <small>Stars / USDT</small>
        </div>
        <div class="meanderLine"></div>

        <div class="row">
          <button class="btn primary" id="btnPayStars">‚≠ê –û–ø–ª–∞—Ç–∏—Ç—å Stars</button>
          <button class="btn secondary" id="btnPayUsdt">üíé –û–ø–ª–∞—Ç–∏—Ç—å USDT</button>
        </div>

        <div id="payBox" class="box hidden">
          <div class="statusRow">
            <div>–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞</div>
            <div class="badge warn" id="payStatus">pending</div>
          </div>
          <div class="hint" id="payMeta" style="margin-top:6px"></div>
          <div class="meanderLine"></div>
          <div class="hint">–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –∫–∞–∂–¥—ã–µ ~1.2 —Å–µ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–∫–∞–∑. –ö–æ–≥–¥–∞ <b>paid</b> ‚Äî –ø–æ–∫–∞–∂–µ–º –∫–æ–Ω—Ñ–∏–≥ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.</div>
        </div>
      </div>
    </div>

    <!-- INSTRUCTIONS -->
    <div id="screenGuide" class="hidden">
      <div class="card">
        <div class="marble"></div>

        <div class="head">
          <h2>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</h2>
          <small>—Å–≤–∞–π–ø-–∫–∞—Ä—Ç–æ—á–∫–∏</small>
        </div>
        <div class="meanderLine"></div>

        <div class="carousel" id="carousel">
          <div class="slide">
            <div class="slideTitle">
              <b>iOS</b>
              <span>V2Box / Shadowrocket</span>
            </div>
            <div class="steps">
              1) –ù–∞–∂–º–∏ ‚Äú–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥‚Äù –Ω–∞ –≥–ª–∞–≤–Ω–æ–π<br/>
              2) –°–∫–æ–ø–∏—Ä—É–π VLESS<br/>
              3) –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: Import ‚Üí ‚ÄúFrom Clipboard / –í—Å—Ç–∞–≤–∏—Ç—å‚Äù<br/>
              4) Connect
            </div>
          </div>

          <div class="slide">
            <div class="slideTitle">
              <b>Android</b>
              <span>v2rayNG</span>
            </div>
            <div class="steps">
              1) –ù–∞–∂–º–∏ ‚Äú–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥‚Äù<br/>
              2) –°–∫–æ–ø–∏—Ä—É–π VLESS<br/>
              3) v2rayNG: + ‚Üí Import from Clipboard<br/>
              4) Connect
            </div>
          </div>

          <div class="slide">
            <div class="slideTitle">
              <b>Desktop</b>
              <span>Nekoray / v2rayN</span>
            </div>
            <div class="steps">
              1) –ü–æ–ª—É—á–∏ –∫–æ–Ω—Ñ–∏–≥ –∏ —Å–∫–æ–ø–∏—Ä—É–π<br/>
              2) –ò–º–ø–æ—Ä—Ç –ø–æ —Å—Å—ã–ª–∫–µ / –∏–∑ –±—É—Ñ–µ—Ä–∞<br/>
              3) –ü–æ–¥–∫–ª—é—á–∏—Å—å
            </div>
          </div>
        </div>

        <div style="height:10px"></div>
        <div class="hint">–ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–≤–∞–π–ø–∞–π –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º.</div>
      </div>
    </div>

    <!-- PROFILE -->
    <div id="screenProfile" class="hidden">
      <div class="card">
        <div class="marble"></div>

        <div class="head">
          <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
          <small>–ø–æ—Ç–æ–º –ø–æ–¥–∫–ª—é—á–∏–º Telegram</small>
        </div>
        <div class="meanderLine"></div>

        <div class="statusRow">
          <div class="hint">ID</div>
          <div class="badge" id="profileId">‚Äî</div>
        </div>

        <div style="height:10px"></div>

        <div class="statusRow">
          <div class="hint">–ü–æ–¥–ø–∏—Å–∫–∞</div>
          <div class="badge warn" id="subStatus">–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ</div>
        </div>
        <div class="hint" id="activeUntil" style="margin-top:6px">–ê–∫—Ç–∏–≤–Ω–∞ –¥–æ: ‚Äî</div>

        <div class="meanderLine"></div>

        <div class="row">
          <button class="btn secondary" id="btnResetId">–ù–æ–≤—ã–π ID</button>
          <button class="btn ghost" id="btnHistory" disabled>–ò—Å—Ç–æ—Ä–∏—è (—Å–∫–æ—Ä–æ)</button>
        </div>

        <div class="box" style="margin-top:12px">
          <div class="hint"><b>–†–µ—Ñ–µ—Ä–∞–ª–∫–∞ (UI —Å–µ–π—á–∞—Å, –ª–æ–≥–∏–∫–∞ —É–∂–µ –µ—Å—Ç—å):</b><br/>‚Äú–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ ‚Äî +7 –¥–Ω–µ–π‚Äù</div>
          <div style="height:10px"></div>
          <button class="btn secondary" id="btnRefCreate">–°–æ–∑–¥–∞—Ç—å —Ä–µ—Ñ-–∫–æ–¥</button>
          <div class="hint" id="refOut" style="margin-top:8px"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Nav -->
  <div class="nav">
    <div class="navInner">
      <button class="tab active" id="tabHome">–ì–ª–∞–≤–Ω–∞—è</button>
      <button class="tab" id="tabGuide">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</button>
      <button class="tab" id="tabProfile">–ü—Ä–æ—Ñ–∏–ª—å</button>
    </div>
  </div>

<script>
  // === CONFIG ===
  const API_BASE = "https://api.45.133.251.210.nip.io:8443";

  // Telegram WebApp safe init
  const tg = window.Telegram?.WebApp;
  if (tg) {
    try { tg.ready(); } catch(e){}
    try { tg.expand(); } catch(e){}
  }

  const $ = (id)=>document.getElementById(id);
  const show = (el)=>el.classList.remove("hidden");
  const hide = (el)=>el.classList.add("hidden");

  function clearError(){
    hide($("errBox"));
    $("errText").textContent = "";
  }
  function setError(msg){
    $("errText").textContent = msg || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞";
    show($("errBox"));
  }

  function genUserKey(){
    const n = Math.floor(Math.random()*9000)+1000;
    return "zeus-" + n;
  }
  function setProfileId(id){
    $("profileId").textContent = id || "‚Äî";
    localStorage.setItem("zeus_user_key", id || "");
  }

  // API check
  async function pingApi(){
    try{
      const r = await fetch(API_BASE + "/health", { method:"GET" });
      if(!r.ok) throw new Error("health not ok");
      await r.json();

      $("apiText").textContent = "API: online";
      $("apiDot").style.background = "var(--ok)";
      $("apiDot").style.boxShadow = "0 0 14px rgba(36,211,140,.55)";

      $("heroApi").textContent = "online";
      return true;
    }catch(e){
      $("apiText").textContent = "API: offline";
      $("apiDot").style.background = "var(--bad)";
      $("apiDot").style.boxShadow = "0 0 14px rgba(255,77,77,.55)";

      $("heroApi").textContent = "offline";
      return false;
    }
  }

  // CONFIG issuance
  let lastConfig = "";

  $("btnGetConfig").addEventListener("click", async ()=>{
    clearError();
    hide($("configBox"));

    let user_key = $("userKey").value.trim();
    if(!user_key){
      user_key = genUserKey();
      $("userKey").value = user_key;
    }
    setProfileId(user_key);

    $("btnGetConfig").disabled = true;
    $("btnGetConfig").textContent = "‚ö° –î–æ–±—ã–≤–∞—é –º–æ–ª–Ω–∏—é‚Ä¶";

    try{
      const r = await fetch(API_BASE + "/issue-config", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({
          inbound_id: 1,
          user_key,
          days: 30,
          limit_ip: 0
        })
      });

      const txt = await r.text();
      let data;
      try { data = JSON.parse(txt); } catch(e){ data = { raw: txt }; }

      if(!r.ok){
        throw new Error(data?.detail || ("HTTP " + r.status + ": " + txt));
      }

      lastConfig = data.link || "";
      if(!lastConfig) throw new Error("–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç: –Ω–µ—Ç –ø–æ–ª—è link");

      $("configText").textContent = lastConfig;
      show($("configBox"));
    }catch(e){
      setError(e?.message || String(e));
    }finally{
      $("btnGetConfig").disabled = false;
      $("btnGetConfig").textContent = "‚ö° –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥";
    }
  });

  $("btnCopy").addEventListener("click", async ()=>{
    try{
      await navigator.clipboard.writeText(lastConfig);
      const old = $("btnCopy").textContent;
      $("btnCopy").textContent = "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ";
      setTimeout(()=> $("btnCopy").textContent = old, 900);
    }catch(e){
      alert("–ù–µ —Å–º–æ–≥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –°–∫–æ–ø–∏—Ä—É–π –≤—Ä—É—á–Ω—É—é:\n\n" + lastConfig);
    }
  });

  // PAYMENTS + polling
  let pollTimer = null;

  async function pollOrder(orderId){
    if(pollTimer) clearInterval(pollTimer);

    pollTimer = setInterval(async ()=>{
      try{
        const r = await fetch(API_BASE + "/pay/order/" + orderId, { method:"GET" });
        const j = await r.json();

        $("payStatus").textContent = j.status || "pending";
        $("payStatus").className = "badge " + ((j.status === "paid") ? "ok" : "warn");

        const amount = (j.amount != null) ? `${j.amount} ${j.currency || ""}` : "";
        $("payMeta").textContent = `order: ${j.id} ‚Ä¢ ${amount} ‚Ä¢ days: ${j.plan_days || ""} ‚Ä¢ devices: ${j.devices || ""}`;

        if(j.status === "paid"){
          clearInterval(pollTimer);
          pollTimer = null;

          $("subStatus").textContent = "–ê–∫—Ç–∏–≤–Ω–∞";
          $("subStatus").className = "badge ok";
          $("heroSub").textContent = "–∞–∫—Ç–∏–≤–Ω–∞";

          if(j.active_until){
            $("activeUntil").textContent = "–ê–∫—Ç–∏–≤–Ω–∞ –¥–æ: " + new Date(j.active_until).toLocaleString();
          }

          if(j.config_link){
            lastConfig = j.config_link;
            $("configText").textContent = lastConfig;
            show($("configBox"));
          }
        }
      }catch(e){
        // –º–æ–ª—á–∏–º, —á—Ç–æ–±—ã –Ω–µ –±–µ—Å–∏—Ç—å —é–∑–µ—Ä–∞
      }
    }, 1200);
  }

  async function ensureUserKey(){
    let user_key = $("userKey").value.trim();
    if(!user_key){
      user_key = genUserKey();
      $("userKey").value = user_key;
    }
    setProfileId(user_key);
    return user_key;
  }

  $("btnPayStars").addEventListener("click", async ()=>{
    clearError();
    show($("payBox"));
    $("payStatus").textContent = "creating‚Ä¶";
    $("payStatus").className = "badge warn";
    $("payMeta").textContent = "";

    const user_key = await ensureUserKey();

    try{
      const r = await fetch(API_BASE + "/pay/stars/create", {
        method:"POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({ user_key, days:30, devices:1 })
      });
      const j = await r.json();
      if(!r.ok) throw new Error(j?.detail || "Stars create error");

      $("payStatus").textContent = "pending";
      $("payMeta").textContent = `order: ${j.order_id}`;

      if(tg && tg.openInvoice){
        tg.openInvoice(j.invoice_link, ()=>{});
      } else {
        window.open(j.invoice_link, "_blank");
      }

      pollOrder(j.order_id);
    }catch(e){
      setError(e?.message || String(e));
      $("payStatus").textContent = "error";
      $("payStatus").className = "badge bad";
    }
  });

  $("btnPayUsdt").addEventListener("click", async ()=>{
    clearError();
    show($("payBox"));
    $("payStatus").textContent = "creating‚Ä¶";
    $("payStatus").className = "badge warn";
    $("payMeta").textContent = "";

    const user_key = await ensureUserKey();

    try{
      const r = await fetch(API_BASE + "/pay/crypto/create", {
        method:"POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({ user_key, days:30, devices:1 })
      });
      const j = await r.json();
      if(!r.ok) throw new Error(j?.detail || "Crypto create error");

      $("payStatus").textContent = "pending";
      $("payMeta").textContent = `order: ${j.order_id}`;

      if(j.invoice_url){
        window.open(j.invoice_url, "_blank");
      }

      pollOrder(j.order_id);
    }catch(e){
      setError(e?.message || String(e));
      $("payStatus").textContent = "error";
      $("payStatus").className = "badge bad";
    }
  });

  // REF
  $("btnRefCreate").addEventListener("click", async ()=>{
    clearError();
    $("refOut").textContent = "—Å–æ–∑–¥–∞—é‚Ä¶";

    const user_key = await ensureUserKey();

    try{
      const r = await fetch(API_BASE + "/ref/create", {
        method:"POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({ user_key })
      });
      const j = await r.json();
      if(!r.ok) throw new Error(j?.detail || "ref create error");

      $("refOut").textContent = "–¢–≤–æ–π –∫–æ–¥: " + j.code;
    }catch(e){
      $("refOut").textContent = "";
      setError(e?.message || String(e));
    }
  });

  $("btnResetId").addEventListener("click", ()=>{
    const id = genUserKey();
    $("userKey").value = id;
    setProfileId(id);
  });

  // Tabs
  function setTab(tab){
    const map = [
      ["tabHome","screenHome"],
      ["tabGuide","screenGuide"],
      ["tabProfile","screenProfile"]
    ];
    map.forEach(([t,s])=>{
      $(t).classList.toggle("active", t === tab);
      $(s).classList.toggle("hidden", t !== tab);
    });
  }
  $("tabHome").onclick = ()=>setTab("tabHome");
  $("tabGuide").onclick = ()=>setTab("tabGuide");
  $("tabProfile").onclick = ()=>setTab("tabProfile");

  // Init
  (async ()=>{
    const saved = localStorage.getItem("zeus_user_key") || "";
    if(saved){
      $("userKey").value = saved;
      $("profileId").textContent = saved;
    }
    $("userKey").addEventListener("change", ()=>{
      localStorage.setItem("zeus_user_key", $("userKey").value.trim());
      $("profileId").textContent = $("userKey").value.trim() || "‚Äî";
    });

    await pingApi();
    setInterval(pingApi, 12000);
  })();
</script>
</body>
</html>
